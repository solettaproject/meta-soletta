From dc3e187aed3bc119ffc5a790340b36172c723ae5 Mon Sep 17 00:00:00 2001
From: Bruno Dilly <bruno.dilly@intel.com>
Date: Tue, 19 Apr 2016 10:42:31 -0300
Subject: [PATCH] oic-gen: fix rep_vec issue

It was passing wrong parameters to create the code

Closes gh-1897

Signed-off-by: Bruno Dilly <bruno.dilly@intel.com>
Signed-off-by: Bruno Bottazzini <bruno.bottazzini@intel.com>
---
 data/scripts/sol-oic-gen.py | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/data/scripts/sol-oic-gen.py b/data/scripts/sol-oic-gen.py
index 559040a..5d41f91 100755
--- a/data/scripts/sol-oic-gen.py
+++ b/data/scripts/sol-oic-gen.py
@@ -152,13 +152,13 @@ def generate_object_to_repr_vec_fn_common_c(state_struct_name, name, props, clie
         if 'enum' in prop_descr:
             tbl = '%s_%s_tbl' % (state_struct_name, prop_name)
             val = '%s[state->state.%s].key' % (tbl, prop_name)
-            vallen = '%s[state->state.%s].len' % val
+            vallen = '%s[state->state.%s].len' % (tbl, prop_name)
 
             ftype = 'SOL_OIC_REPR_TEXT_STRING'
             fargs = (val, vallen)
         elif prop_descr['type'] == 'boolean':
             val = 'state->state.%s' % prop_name
-        
+
             ftype = 'SOL_OIC_REPR_BOOLEAN'
             fargs = (val, )
         elif prop_descr['type'] == 'string':
-- 
2.7.1

